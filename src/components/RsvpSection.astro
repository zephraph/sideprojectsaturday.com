---
export interface Props {
	rsvped: boolean;
}

const { rsvped } = Astro.props;
const statusText = rsvped ? "✅ You're RSVP'd!" : "❌ Not RSVP'd";
const buttonText = rsvped ? "Cancel RSVP" : "RSVP Now";
const nextValue = rsvped ? "false" : "true";
---

<div id="rsvp-section" class="bg-green-50 border border-green-200 rounded-md p-3">
	<div class="text-sm font-medium text-green-800 mb-2">
		Next Event RSVP
	</div>
	<div class="flex items-center justify-between">
		<span class="text-green-700 text-sm">
			{statusText}
		</span>
		<form
			hx-post="/api/rsvp-toggle"
			hx-target="#rsvp-section"
			hx-swap="outerHTML"
		>
			<input
				type="hidden"
				name="rsvped"
				value={nextValue}
			/>
			<button
				type="submit"
				class="text-xs text-green-600 hover:text-green-800 font-medium underline cursor-pointer"
			>
				{buttonText}
			</button>
		</form>
	</div>
</div>