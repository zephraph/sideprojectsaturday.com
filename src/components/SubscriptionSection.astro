---
export interface Props {
  subscribed: boolean;
  statusText: string;
  buttonText: string;
  nextValue: string;
}

const { subscribed, statusText, buttonText, nextValue } = Astro.props;
---

<div id="subscription-section" class="bg-purple-50 border border-purple-200 rounded-md p-3">
  <div class="text-sm font-medium text-purple-800 mb-2">
    Event Notifications
  </div>
  <div class="flex items-center justify-between">
    <span class="text-purple-700 text-sm">
      {statusText}
    </span>
    <form
      hx-post="/api/subscription-toggle"
      hx-target="#subscription-section"
      hx-swap="outerHTML"
    >
      <input
        type="hidden"
        name="subscribed"
        value={nextValue}
      />
      <button
        type="submit"
        class="text-xs text-purple-600 hover:text-purple-800 font-medium underline cursor-pointer"
      >
        {buttonText}
      </button>
    </form>
  </div>
</div>